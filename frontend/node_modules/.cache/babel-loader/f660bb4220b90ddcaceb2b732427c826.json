{"ast":null,"code":"import _isNil from \"lodash/isNil\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport React, { Component } from 'react';\nimport reduceCSSCalc from 'reduce-css-calc';\nimport classNames from 'classnames';\nimport { isNumber, isNumOrStr } from '../util/DataUtils';\nimport Global from '../util/Global';\nimport { filterProps } from '../util/types';\nimport { getStringSize } from '../util/DOMUtils';\nvar BREAKING_SPACES = /[ \\f\\n\\r\\t\\v\\u2028\\u2029]+/;\n\nvar calculateWordWidths = function calculateWordWidths(props) {\n  try {\n    var words = [];\n\n    if (!_isNil(props.children)) {\n      if (props.breakAll) {\n        words = props.children.toString().split('');\n      } else {\n        words = props.children.toString().split(BREAKING_SPACES);\n      }\n    }\n\n    var wordsWithComputedWidth = words.map(function (word) {\n      return {\n        word: word,\n        width: getStringSize(word, props.style).width\n      };\n    });\n    var spaceWidth = props.breakAll ? 0 : getStringSize(\"\\xA0\", props.style).width;\n    return {\n      wordsWithComputedWidth: wordsWithComputedWidth,\n      spaceWidth: spaceWidth\n    };\n  } catch (e) {\n    return null;\n  }\n};\n\nvar calculateWordsByLines = function calculateWordsByLines(wordsWithComputedWidth, spaceWidth, lineWidth, scaleToFit) {\n  return (wordsWithComputedWidth || []).reduce(function (result, _ref) {\n    var word = _ref.word,\n        width = _ref.width;\n    var currentLine = result[result.length - 1];\n\n    if (currentLine && (lineWidth == null || scaleToFit || currentLine.width + width + spaceWidth < lineWidth)) {\n      // Word can be added to an existing line\n      currentLine.words.push(word);\n      currentLine.width += width + spaceWidth;\n    } else {\n      // Add first word to line or word is too long to scaleToFit on existing line\n      var newLine = {\n        words: [word],\n        width: width\n      };\n      result.push(newLine);\n    }\n\n    console.log(result);\n    return result;\n  }, []);\n};\n\nvar getWordsWithoutCalculate = function getWordsWithoutCalculate(children) {\n  var words = !_isNil(children) ? children.toString().split(BREAKING_SPACES) : [];\n  return [{\n    words: words\n  }];\n};\n\nvar getWordsByLines = function getWordsByLines(props, needCalculate) {\n  // Only perform calculations if using features that require them (multiline, scaleToFit)\n  if ((props.width || props.scaleToFit) && !Global.isSsr) {\n    var wordsWithComputedWidth, spaceWidth;\n\n    if (needCalculate) {\n      var wordWidths = calculateWordWidths(props);\n\n      if (wordWidths) {\n        var wcw = wordWidths.wordsWithComputedWidth,\n            sw = wordWidths.spaceWidth;\n        wordsWithComputedWidth = wcw;\n        spaceWidth = sw;\n      } else {\n        return getWordsWithoutCalculate(props.children);\n      }\n\n      return calculateWordsByLines(wordsWithComputedWidth, spaceWidth, props.width, props.scaleToFit);\n    }\n  }\n\n  return getWordsWithoutCalculate(props.children);\n};\n\nvar Text =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Text, _Component);\n\n  var _super = _createSuper(Text);\n\n  function Text() {\n    var _this;\n\n    _classCallCheck(this, Text);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Text, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          dx = _this$props.dx,\n          dy = _this$props.dy,\n          textAnchor = _this$props.textAnchor,\n          verticalAnchor = _this$props.verticalAnchor,\n          scaleToFit = _this$props.scaleToFit,\n          angle = _this$props.angle,\n          lineHeight = _this$props.lineHeight,\n          capHeight = _this$props.capHeight,\n          className = _this$props.className,\n          breakAll = _this$props.breakAll,\n          textProps = _objectWithoutProperties(_this$props, [\"dx\", \"dy\", \"textAnchor\", \"verticalAnchor\", \"scaleToFit\", \"angle\", \"lineHeight\", \"capHeight\", \"className\", \"breakAll\"]);\n\n      var wordsByLines = this.state.wordsByLines;\n      console.log(textProps.x, textProps.y, this.props.children, wordsByLines, this.props);\n\n      if (!isNumOrStr(textProps.x) || !isNumOrStr(textProps.y)) {\n        return null;\n      }\n\n      var x = textProps.x + (isNumber(dx) ? dx : 0);\n      var y = textProps.y + (isNumber(dy) ? dy : 0);\n      var startDy;\n\n      switch (verticalAnchor) {\n        case 'start':\n          startDy = reduceCSSCalc(\"calc(\".concat(capHeight, \")\"));\n          break;\n\n        case 'middle':\n          startDy = reduceCSSCalc(\"calc(\".concat((wordsByLines.length - 1) / 2, \" * -\").concat(lineHeight, \" + (\").concat(capHeight, \" / 2))\"));\n          break;\n\n        default:\n          startDy = reduceCSSCalc(\"calc(\".concat(wordsByLines.length - 1, \" * -\").concat(lineHeight, \")\"));\n          break;\n      }\n\n      var transforms = [];\n\n      if (scaleToFit) {\n        var lineWidth = wordsByLines[0].width;\n        var width = this.props.width;\n        transforms.push(\"scale(\".concat((isNumber(width) ? width / lineWidth : 1) / lineWidth, \")\"));\n      }\n\n      if (angle) {\n        transforms.push(\"rotate(\".concat(angle, \", \").concat(x, \", \").concat(y, \")\"));\n      }\n\n      if (transforms.length) {\n        textProps.transform = transforms.join(' ');\n      }\n\n      return (\n        /*#__PURE__*/\n        React.createElement(\"text\", _extends({}, filterProps(textProps, true), {\n          x: x,\n          y: y,\n          className: classNames('recharts-text', className),\n          textAnchor: textAnchor\n        }), wordsByLines.map(function (line, index) {\n          return (\n            /*#__PURE__*/\n            // eslint-disable-next-line react/no-array-index-key\n            React.createElement(\"tspan\", {\n              x: x,\n              dy: index === 0 ? startDy : lineHeight,\n              key: index\n            }, line.words.join(breakAll ? '' : ' '))\n          );\n        }))\n      );\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.width !== prevState.prevWidth || nextProps.scaleToFit !== prevState.prevScaleToFit || nextProps.children !== prevState.prevChildren || nextProps.style !== prevState.prevStyle || nextProps.breakAll !== prevState.prevBreakAll) {\n        var needCalculate = nextProps.children !== prevState.prevChildren || nextProps.style !== prevState.prevStyle || nextProps.breakAll !== prevState.prevBreakAll;\n        return {\n          prevWidth: nextProps.width,\n          prevScaleToFit: nextProps.scaleToFit,\n          prevChildren: nextProps.children,\n          prevStyle: nextProps.style,\n          wordsByLines: getWordsByLines(nextProps, needCalculate)\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return Text;\n}(Component);\n\nText.defaultProps = {\n  x: 0,\n  y: 0,\n  lineHeight: '1em',\n  capHeight: '0.71em',\n  // Magic number from d3\n  scaleToFit: false,\n  textAnchor: 'start',\n  verticalAnchor: 'end' // Maintain compat with existing charts / default SVG behavior\n\n};\nexport default Text;","map":{"version":3,"sources":["C:/Users/Impasse/Documents/workspace-spring-tool-suite-4-4.9.0.RELEASE/Museum/frontend/node_modules/recharts/es6/component/Text.js"],"names":["_isNil","_typeof","obj","Symbol","iterator","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_createSuper","Derived","Super","_getPrototypeOf","result","_isNativeReflectConstruct","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","React","Component","reduceCSSCalc","classNames","isNumber","isNumOrStr","Global","filterProps","getStringSize","BREAKING_SPACES","calculateWordWidths","words","children","breakAll","split","wordsWithComputedWidth","map","word","width","style","spaceWidth","calculateWordsByLines","lineWidth","scaleToFit","reduce","_ref","currentLine","push","newLine","console","log","getWordsWithoutCalculate","getWordsByLines","needCalculate","isSsr","wordWidths","wcw","sw","Text","_Component","_super","_this","_len","args","Array","_key","concat","state","render","_this$props","dx","dy","textAnchor","verticalAnchor","angle","lineHeight","capHeight","className","textProps","wordsByLines","x","y","startDy","transforms","transform","join","createElement","line","index","getDerivedStateFromProps","nextProps","prevState","prevWidth","prevScaleToFit","prevChildren","prevStyle","prevBreakAll","defaultProps"],"mappings":"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","sourcesContent":["import _isNil from \"lodash/isNil\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React, { Component } from 'react';\nimport reduceCSSCalc from 'reduce-css-calc';\nimport classNames from 'classnames';\nimport { isNumber, isNumOrStr } from '../util/DataUtils';\nimport Global from '../util/Global';\nimport { filterProps } from '../util/types';\nimport { getStringSize } from '../util/DOMUtils';\nvar BREAKING_SPACES = /[ \\f\\n\\r\\t\\v\\u2028\\u2029]+/;\n\nvar calculateWordWidths = function calculateWordWidths(props) {\n  try {\n    var words = [];\n\n    if (!_isNil(props.children)) {\n      if (props.breakAll) {\n        words = props.children.toString().split('');\n      } else {\n        words = props.children.toString().split(BREAKING_SPACES);\n      }\n    }\n\n    var wordsWithComputedWidth = words.map(function (word) {\n      return {\n        word: word,\n        width: getStringSize(word, props.style).width\n      };\n    });\n    var spaceWidth = props.breakAll ? 0 : getStringSize(\"\\xA0\", props.style).width;\n    return {\n      wordsWithComputedWidth: wordsWithComputedWidth,\n      spaceWidth: spaceWidth\n    };\n  } catch (e) {\n    return null;\n  }\n};\n\nvar calculateWordsByLines = function calculateWordsByLines(wordsWithComputedWidth, spaceWidth, lineWidth, scaleToFit) {\n  return (wordsWithComputedWidth || []).reduce(function (result, _ref) {\n    var word = _ref.word,\n        width = _ref.width;\n    var currentLine = result[result.length - 1];\n\n    if (currentLine && (lineWidth == null || scaleToFit || currentLine.width + width + spaceWidth < lineWidth)) {\n      // Word can be added to an existing line\n      currentLine.words.push(word);\n      currentLine.width += width + spaceWidth;\n    } else {\n      // Add first word to line or word is too long to scaleToFit on existing line\n      var newLine = {\n        words: [word],\n        width: width\n      };\n      result.push(newLine);\n    }\n\n    console.log(result);\n    return result;\n  }, []);\n};\n\nvar getWordsWithoutCalculate = function getWordsWithoutCalculate(children) {\n  var words = !_isNil(children) ? children.toString().split(BREAKING_SPACES) : [];\n  return [{\n    words: words\n  }];\n};\n\nvar getWordsByLines = function getWordsByLines(props, needCalculate) {\n  // Only perform calculations if using features that require them (multiline, scaleToFit)\n  if ((props.width || props.scaleToFit) && !Global.isSsr) {\n    var wordsWithComputedWidth, spaceWidth;\n\n    if (needCalculate) {\n      var wordWidths = calculateWordWidths(props);\n\n      if (wordWidths) {\n        var wcw = wordWidths.wordsWithComputedWidth,\n            sw = wordWidths.spaceWidth;\n        wordsWithComputedWidth = wcw;\n        spaceWidth = sw;\n      } else {\n        return getWordsWithoutCalculate(props.children);\n      }\n\n      return calculateWordsByLines(wordsWithComputedWidth, spaceWidth, props.width, props.scaleToFit);\n    }\n  }\n\n  return getWordsWithoutCalculate(props.children);\n};\n\nvar Text = /*#__PURE__*/function (_Component) {\n  _inherits(Text, _Component);\n\n  var _super = _createSuper(Text);\n\n  function Text() {\n    var _this;\n\n    _classCallCheck(this, Text);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Text, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          dx = _this$props.dx,\n          dy = _this$props.dy,\n          textAnchor = _this$props.textAnchor,\n          verticalAnchor = _this$props.verticalAnchor,\n          scaleToFit = _this$props.scaleToFit,\n          angle = _this$props.angle,\n          lineHeight = _this$props.lineHeight,\n          capHeight = _this$props.capHeight,\n          className = _this$props.className,\n          breakAll = _this$props.breakAll,\n          textProps = _objectWithoutProperties(_this$props, [\"dx\", \"dy\", \"textAnchor\", \"verticalAnchor\", \"scaleToFit\", \"angle\", \"lineHeight\", \"capHeight\", \"className\", \"breakAll\"]);\n\n      var wordsByLines = this.state.wordsByLines;\n      console.log(textProps.x, textProps.y, this.props.children, wordsByLines, this.props);\n\n      if (!isNumOrStr(textProps.x) || !isNumOrStr(textProps.y)) {\n        return null;\n      }\n\n      var x = textProps.x + (isNumber(dx) ? dx : 0);\n      var y = textProps.y + (isNumber(dy) ? dy : 0);\n      var startDy;\n\n      switch (verticalAnchor) {\n        case 'start':\n          startDy = reduceCSSCalc(\"calc(\".concat(capHeight, \")\"));\n          break;\n\n        case 'middle':\n          startDy = reduceCSSCalc(\"calc(\".concat((wordsByLines.length - 1) / 2, \" * -\").concat(lineHeight, \" + (\").concat(capHeight, \" / 2))\"));\n          break;\n\n        default:\n          startDy = reduceCSSCalc(\"calc(\".concat(wordsByLines.length - 1, \" * -\").concat(lineHeight, \")\"));\n          break;\n      }\n\n      var transforms = [];\n\n      if (scaleToFit) {\n        var lineWidth = wordsByLines[0].width;\n        var width = this.props.width;\n        transforms.push(\"scale(\".concat((isNumber(width) ? width / lineWidth : 1) / lineWidth, \")\"));\n      }\n\n      if (angle) {\n        transforms.push(\"rotate(\".concat(angle, \", \").concat(x, \", \").concat(y, \")\"));\n      }\n\n      if (transforms.length) {\n        textProps.transform = transforms.join(' ');\n      }\n\n      return /*#__PURE__*/React.createElement(\"text\", _extends({}, filterProps(textProps, true), {\n        x: x,\n        y: y,\n        className: classNames('recharts-text', className),\n        textAnchor: textAnchor\n      }), wordsByLines.map(function (line, index) {\n        return (\n          /*#__PURE__*/\n          // eslint-disable-next-line react/no-array-index-key\n          React.createElement(\"tspan\", {\n            x: x,\n            dy: index === 0 ? startDy : lineHeight,\n            key: index\n          }, line.words.join(breakAll ? '' : ' '))\n        );\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.width !== prevState.prevWidth || nextProps.scaleToFit !== prevState.prevScaleToFit || nextProps.children !== prevState.prevChildren || nextProps.style !== prevState.prevStyle || nextProps.breakAll !== prevState.prevBreakAll) {\n        var needCalculate = nextProps.children !== prevState.prevChildren || nextProps.style !== prevState.prevStyle || nextProps.breakAll !== prevState.prevBreakAll;\n        return {\n          prevWidth: nextProps.width,\n          prevScaleToFit: nextProps.scaleToFit,\n          prevChildren: nextProps.children,\n          prevStyle: nextProps.style,\n          wordsByLines: getWordsByLines(nextProps, needCalculate)\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return Text;\n}(Component);\n\nText.defaultProps = {\n  x: 0,\n  y: 0,\n  lineHeight: '1em',\n  capHeight: '0.71em',\n  // Magic number from d3\n  scaleToFit: false,\n  textAnchor: 'start',\n  verticalAnchor: 'end' // Maintain compat with existing charts / default SVG behavior\n\n};\nexport default Text;"]},"metadata":{},"sourceType":"module"}